(function(e){function t(t){for(var s,r,o=t[0],l=t[1],d=t[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(p.length)p.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},n=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0305":function(e,t,a){"use strict";var s=a("d05d"),i=a.n(s);i.a},"0882":function(e,t,a){"use strict";var s=a("d3d7"),i=a.n(s);i.a},"3c13":function(e,t,a){"use strict";var s=a("c050"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"countdown-mask"}),e._m(0),a("router-view")],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"countdown-container"},[a("div",{staticClass:"countdown-box"},[a("div",{staticClass:"countdown-text"})])])}],r={name:"app",provide:function(){return{countDown:this.countDown}},data:function(){return{timer:null}},methods:{countDown:function(){clearInterval(this.timer);var e=3,t=document.querySelector(".countdown-mask"),a=document.querySelector(".countdown-container");this.timer=setInterval((function(){if(e<=0)clearInterval(this.timer),t.style.display="none",a.style.display="none",window.location.reload();else{t.style.display="block",a.style.display="block";var s=document.querySelector(".countdown-text");s.innerHTML=e,e--}}),1e3)}}},o=r,l=(a("0882"),a("2877")),d=Object(l["a"])(o,i,n,!1,null,"a82ba044",null),c=d.exports,u=a("8c4f"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_container"},[s("div",{staticClass:"login_box"},[s("img",{staticClass:"logot",attrs:{src:a("cf05"),alt:""}}),s("span",{staticClass:"zdtitle"},[e._v("会畅教育终端版本管理服务")]),s("el-form",{ref:"loginFormRef",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.loginForm,rules:e.loginFormRules}},[s("el-form-item",{attrs:{prop:"user"}},[s("el-input",{attrs:{placeholder:"请输入账号","prefix-icon":"iconfont icon-__sign-user"},model:{value:e.loginForm.user,callback:function(t){e.$set(e.loginForm,"user",t)},expression:"loginForm.user"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"iconfont icon-__sigg-code",type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),s("el-form-item",[s("el-button",{staticStyle:{background:"rgba(0,68,194,0.5)"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)])},m=[],f=(a("d3b7"),a("96cf"),{data:function(){return{loginForm:{user:"",password:""},loginFormRules:{user:[{required:!0,message:"请输入登录名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}]}}},mounted:function(){window.sessionStorage.removeItem("token"),window.localStorage.removeItem("user")},created:function(){var e=this;document.onkeydown=function(t){var a=window.event.keyCode;13==a&&e.login()}},methods:{login:function(){var e=this;this.$refs.loginFormRef.validate((function(t){var a,s;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,regeneratorRuntime.awrap(e.$http.get("user/login",{params:{password:e.loginForm.password,username:e.loginForm.user}}));case 4:a=i.sent,s=a.data,200==s.Code?(e.$message.success("登录成功"),window.sessionStorage.setItem("token","tokenbypeople"),window.localStorage.setItem("user",e.loginForm.user),e.$router.push("/home")):e.$message.error("账号或密码错误，请重新输入！");case 7:case"end":return i.stop()}}))}))}}}),h=f,g=(a("0305"),Object(l["a"])(h,p,m,!1,null,"454b8d3b",null)),w=g.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[a("div",{staticClass:"el-headerImg"},[a("span",{staticClass:"icon iconfont outAdmin1"},[e._v("")]),a("span",[e._v("会畅教育终端版本管理服务")])]),a("div",[a("span",{staticClass:"icon iconfont outAdmin"},[e._v("")]),a("el-dropdown",{staticClass:"avatar-container right-menu-item hover-effect",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.userName)+" "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("退出登录")])],1)],1)],1)]),a("el-main",{staticClass:"homeBody"},[a("div",{staticClass:"bodyHeader"},[a("div",{staticClass:"bodyZhongduan"},[e._v(e._s("终端列表（"+e.tableData.length+"）"))]),a("div",["admin"==e.userName?a("el-button",{staticClass:"bodyButton bodyButton1",attrs:{type:"primary"},on:{click:e.addTerminalHandle}},[a("span",{staticClass:"icon iconfont"},[e._v("")]),e._v(" 添加 ")]):e._e(),a("el-button",{staticClass:"bodyButton",on:{click:e.freshData}},[a("i",{staticClass:"iconfont icon-__refresh"}),e._v("刷新 ")])],1)]),a("div",{staticClass:"tableCrd"},[a("el-table",{staticClass:"tab_list",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#fff"},"cell-style":{background:"#f0f8ff"}}},[a("el-table-column",{attrs:{prop:"device",label:"型号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-button",{staticStyle:{"font-size":"14px","font-family":"Microsoft YaHei","font-weight":"400","text-decoration":"underline",color:"rgba(51,51,51,1)"},attrs:{type:"text",size:"medium"},on:{click:function(t){return e.modelHandle(s)}}},[e._v(e._s(s.Device))])]}}])}),a("el-table-column",{attrs:{prop:"Latest",label:"最新版本",align:"center"}}),a("el-table-column",{attrs:{prop:"Comment",label:"描述",align:"center"}}),"admin"==e.userName?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("div",{staticClass:"icon_caozuo",staticStyle:{"margin-right":"30px",cursor:"pointer"},on:{click:function(t){return e.editTerminalHandle(s)}}},[a("i",{staticClass:"iconfont icon-__edit",staticStyle:{"margin-right":"5px"}}),a("span",[e._v("编辑")])]),a("div",{staticClass:"icon_caozuo",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.delTipsHandle(s)}}},[a("i",{staticClass:"iconfont icon-__delete",staticStyle:{"margin-right":"5px"}}),a("span",[e._v("删除")])])]}}],null,!1,990061425)}):e._e()],1)],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"修改密码",visible:e.passwordVisible,width:"450px"},on:{"update:visible":function(t){e.passwordVisible=t}}},[a("div",{staticClass:"del-box",staticStyle:{margin:"20px 0 20px 0"}},[a("el-form",{ref:"passwordForm",attrs:{"label-width":"110px",rules:e.rules,model:e.passwordForm}},[a("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[a("el-input",{staticStyle:{width:"272px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1),a("el-form-item",{attrs:{label:"确认新密码：",prop:"newPasswordCheck"}},[a("el-input",{staticStyle:{width:"272px"},attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.passwordForm.passwordEqual,callback:function(t){e.$set(e.passwordForm,"passwordEqual",t)},expression:"passwordForm.passwordEqual"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("确定")])],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"添加终端",visible:e.addTerminalVisible,width:"450px"},on:{"update:visible":function(t){e.addTerminalVisible=t},close:e.resetForm}},[a("div",{staticClass:"del-box",staticStyle:{margin:"20px 0 20px 0"}},[a("el-form",{ref:"addTerminalForm",attrs:{model:e.addTerminalForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"型号：",prop:"ipInput"}},[a("el-input",{staticStyle:{width:"272px"},attrs:{placeholder:"请输入型号名称"},model:{value:e.addTerminalForm.device,callback:function(t){e.$set(e.addTerminalForm,"device",t)},expression:"addTerminalForm.device"}})],1),a("el-form-item",{attrs:{label:"描述："}},[a("el-input",{staticStyle:{width:"272px"},attrs:{placeholder:"请输入型号描述"},model:{value:e.addTerminalForm.comment,callback:function(t){e.$set(e.addTerminalForm,"comment",t)},expression:"addTerminalForm.comment"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.addZhongDuan}},[e._v("确定")])],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"提示",visible:e.tipsVisible,width:"450px"},on:{"update:visible":function(t){e.tipsVisible=t}}},[a("div",{staticClass:"del-box",staticStyle:{margin:"auto"}},[a("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"30px",color:"#D04B31","margin-right":"10px","margin-left":"25%"}},[e._v("")]),a("div",{staticClass:"text"},[e._v("确认删除"+e._s(e.datesCopy)+"？")])]),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.deleteZhongDuan}},[e._v("删除")])],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"编辑终端",visible:e.editTerminalVisible,width:"450px"},on:{"update:visible":function(t){e.editTerminalVisible=t},close:e.resetFormEdit}},[a("div",{staticClass:"del-box",staticStyle:{margin:"20px 0 20px 0"}},[a("el-form",{ref:"editTerminalForm",attrs:{"label-width":"110px",model:e.editTerminalForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"型号：",prop:"ipInputtwo"}},[a("el-input",{staticStyle:{width:"272px"},attrs:{type:"text"},model:{value:e.editTerminalForm.device,callback:function(t){e.$set(e.editTerminalForm,"device","string"===typeof t?t.trim():t)},expression:"editTerminalForm.device"}})],1),a("el-form-item",{attrs:{label:"描述："}},[a("el-input",{staticStyle:{width:"272px"},attrs:{type:"text"},model:{value:e.editTerminalForm.comment,callback:function(t){e.$set(e.editTerminalForm,"comment","string"===typeof t?t.trim():t)},expression:"editTerminalForm.comment"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.editZhongDuan}},[e._v("保存")])],1)])],1)},b=[],y={data:function(){var e=this,t=function(t,a,s){e.addTerminalForm.device?s():s(new Error("型号不能为空"))},a=function(t,a,s){e.editTerminalForm.device?s():s(new Error("型号不能为空"))},s=function(t,a,s){""==e.passwordForm.password?s(new Error("请再次输入密码")):e.passwordForm.password.length>15||e.passwordForm.password.length<6?s(new Error("长度在 6 到 15 个字符")):s()},i=function(t,a,s){""==e.passwordForm.passwordEqual?s(new Error("请再次输入密码")):e.passwordForm.passwordEqual.length>15||e.passwordForm.passwordEqual.length<6?s(new Error("长度在 6 到 15 个字符")):e.passwordForm.passwordEqual!==e.passwordForm.password?s(new Error("确认密码与新密码不一致!")):s()};return{rules:{ipInput:[{validator:t,trigger:"blur"}],ipInputtwo:[{validator:a,trigger:"blur"}],newPassword:[{validator:s,trigger:"blur"}],newPasswordCheck:[{validator:i,trigger:"blur"}]},userName:"",tableData:[],passwordVisible:!1,addTerminalVisible:!1,tipsVisible:!1,editTerminalVisible:!1,addTerminalForm:{device:"",comment:""},editTerminalForm:{device:"",comment:""},passwordForm:{password:"",passwordEqual:""},dates:"",datesCopy:"",userId:""}},created:function(){this.userName=window.localStorage.getItem("user"),this.getDataDevice(),this.getUserId()},methods:{freshData:function(){this.getDataDevice()},getUserId:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$http.get("user",{}));case 2:e=t.sent,e.data;case 4:case"end":return t.stop()}}),null,this)},getDataDevice:function(){var e,t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.get("device/list",{}));case 2:e=a.sent,t=e.data,200===t.Code&&(null==t.Data?this.tableData=[]:this.tableData=t.Data);case 5:case"end":return a.stop()}}),null,this)},resetForm:function(){this.$refs.addTerminalForm.resetFields(),this.addTerminalForm={device:"",comment:""}},resetFormEdit:function(){this.$refs.editTerminalForm.resetFields(),this.editTerminalForm={device:"",comment:""}},handleCommand:function(e){"a"===e?this.passwordVisible=!0:(this.$router.push({name:"Login"}),window.sessionStorage.removeItem("token"))},changePassword:function(){var e,t,a=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e=this,t="admin"==this.userName?0:1,this.$refs.passwordForm.validate((function(s){if(!s)return!1;var i=window.location.origin+"/upgrade/user/"+t,n=new XMLHttpRequest;n.open("put",i,!0);var r={Password:e.passwordForm.passwordEqual,Username:a.userName},o=JSON.stringify(r);n.send(o),n.onload=function(t){4==n.readyState&200==n.status?(e.$message.success("修改成功"),e.passwordVisible=!1,e.$router.push({name:"Login"}),window.sessionStorage.removeItem("token")):(e.$message.error("修改失败"),e.passwordVisible=!1)}}));case 3:case"end":return s.stop()}}),null,this)},modelHandle:function(e){this.$router.push({name:"Model",query:{type:e.Device,id:e.Id}})},addTerminalHandle:function(){this.addTerminalVisible=!0},delTipsHandle:function(e){this.dates=e.Id,this.datesCopy=e.Device,this.tipsVisible=!0},deleteZhongDuan:function(){var e,t,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e=this,t=new XMLHttpRequest,a=window.location.origin+"/upgrade/device/"+this.dates,t.open("delete",a,!0),t.send(null),t.onload=function(a){200==t.status&4==t.readyState&&(e.tipsVisible=!1,e.getDataDevice())};case 6:case"end":return s.stop()}}),null,this)},editTerminalHandle:function(e){this.editTerminalForm.device=e.Device,this.editTerminalForm.comment=e.Comment,this.dates=e.Id,this.editTerminalVisible=!0},addZhongDuan:function(){var e=this;this.$refs.addTerminalForm.validate((function(t){if(!t)return!1;e.addTerminalFunction()}))},addTerminalFunction:function(){var e,t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.post("device",{device:this.addTerminalForm.device,comment:this.addTerminalForm.comment}));case 2:e=a.sent,t=e.data,200===t.Code?(this.$message.success(t.Msg),this.addTerminalVisible=!1,this.getDataDevice()):this.$message.error(t.Msg);case 5:case"end":return a.stop()}}),null,this)},editZhongDuan:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:e=this,this.$refs.editTerminalForm.validate((function(a){if(!a)return!1;var s=new XMLHttpRequest,i=window.location.origin+"/upgrade/device/"+t.dates;s.open("put",i,!0);var n=JSON.stringify(t.editTerminalForm);s.send(n),s.onload=function(t){200==s.status&4==s.readyState&&(e.editTerminalVisible=!1,e.getDataDevice())}}));case 2:case"end":return a.stop()}}),null,this)}}},x=y,F=(a("79f3"),Object(l["a"])(x,v,b,!1,null,"191ffddc",null)),_=F.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",{staticClass:"el-header"},[a("div",{staticClass:"el-headerImg"},[a("span",{staticClass:"icon iconfont outAdmin1"},[e._v("")]),a("span",[e._v("会畅教育终端版本管理服务")])]),a("div",[a("span",{staticClass:"icon iconfont outAdmin"},[e._v("")]),a("el-dropdown",{staticClass:"avatar-container right-menu-item hover-effect",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.userName)+" "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("退出登录")])],1)],1)],1)]),a("el-main",{staticClass:"homeBody"},[a("div",{staticClass:"bodyHeader"},[a("div",{staticClass:"bodyZhongduan"},[e._v(e._s(e.$route.query.type+"升级包（"+e.tableData.length+"）"))]),a("div",["admin"==e.userName?a("el-button",{staticClass:"bodyButton bodyButton1",attrs:{type:"primary"},on:{click:e.uploadFileButton}},[a("i",{staticClass:"iconfont icon-__update"}),e._v("上传 ")]):e._e(),a("el-button",{staticClass:"bodyButton",on:{click:e.freshData}},[a("i",{staticClass:"iconfont icon-__refresh"}),e._v("刷新 ")]),"admin"==e.userName?a("el-button",{staticClass:"bodyButton",on:{click:e.delMore}},[a("i",{staticClass:"iconfont icon-__delete"}),e._v("批量删除 ")]):e._e(),a("el-button",{staticClass:"bodyButton1",attrs:{type:"primary",icon:"el-icon-d-arrow-left"},on:{click:e.gotOut}},[e._v("返回上级页面")])],1)]),a("div",{staticClass:"tableCrd"},[a("el-table",{staticClass:"tab_list",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#fff"},"cell-style":{background:"#f0f8ff"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center","min-width":"30px"}}),a("el-table-column",{attrs:{label:"序号","min-width":"40px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"font-size":"16px","font-family":"Microsoft YaHei","font-weight":"500","text-decoration":"underline",color:"#666666"},attrs:{type:"text",size:"medium"}},[e._v(e._s(e._f("indexMethod")(t.$index)))])]}}])}),a("el-table-column",{attrs:{prop:"Version",label:"版本",align:"center","min-width":"200px"}}),a("el-table-column",{attrs:{label:"版本日志",align:"center","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-popover",{attrs:{placement:"bottom",title:"详细信息",width:"200",trigger:"hover",content:s.Detail}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看详细")])],1)]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("a",{staticStyle:{"margin-right":"30px","text-decoration":"none",color:"rgb(102,102,102)"},attrs:{href:"http://"+s.Address,target:"_blank"}},[a("i",{staticClass:"iconfont icon-__download icon_download",staticStyle:{"margin-right":"5px"}}),a("span",[e._v("下载")])]),"admin"==e.userName?a("div",{staticClass:"icon_caozuo",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.delTipsHandle(s)}}},[a("i",{staticClass:"iconfont icon-__delete"}),a("span",[e._v("删除")])]):e._e()]}}])})],1)],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"上传版本文件",visible:e.uploadFileVisible,width:"450px"},on:{"update:visible":function(t){e.uploadFileVisible=t}}},[a("div",{staticClass:"upload-file-box"},[a("el-upload",{ref:"upload",staticStyle:{width:"100%",margin:"0 auto"},attrs:{action:"#","http-request":e.uploadFile,"show-file-list":e.showFileList,"on-remove":e.handleRemove,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"上传文件",autocomplete:"off",clearable:""},on:{clear:e.handleRemove},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-input",{attrs:{type:"textarea",maxlength:"1024",rows:"5"},model:{value:e.detail,callback:function(t){e.detail=t},expression:"detail"}})],1),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticClass:"upload-btn",staticStyle:{background:"rgba(31, 113, 204, 1)"},attrs:{type:"primary",disabled:e.updateBtndisable},on:{click:e.upload}},[e._v("上传")])],1)],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"修改密码",visible:e.passwordVisible,width:"450px"},on:{"update:visible":function(t){e.passwordVisible=t}}},[a("div",{staticClass:"del-box",staticStyle:{margin:"20px 0 20px 0"}},[a("el-form",{ref:"passwordForm",attrs:{"label-width":"110px",rules:e.rules,model:e.passwordForm}},[a("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[a("el-input",{staticStyle:{width:"272px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1),a("el-form-item",{attrs:{label:"确认新密码：",prop:"newPasswordCheck"}},[a("el-input",{staticStyle:{width:"272px"},attrs:{type:"password",placeholder:"请输入确认密码"},model:{value:e.passwordForm.passwordEqual,callback:function(t){e.$set(e.passwordForm,"passwordEqual",t)},expression:"passwordForm.passwordEqual"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("确定")])],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"提示",visible:e.tipsVisible,width:"450px"},on:{"update:visible":function(t){e.tipsVisible=t}}},[a("div",{staticClass:"del-box"},[a("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"30px",color:"#D04B31","margin-right":"10px","margin-left":"25%"}},[e._v("")]),a("div",{staticClass:"text"},[e._v("确认删除文件吗？")])]),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.delAloneData}},[e._v("删除")])],1)]),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"提示",visible:e.delMoreVisible,width:"450px"},on:{"update:visible":function(t){e.delMoreVisible=t}}},[a("div",{staticClass:"del-box"},[a("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"30px",color:"#D04B31","margin-right":"10px","margin-left":"13%"}},[e._v("")]),a("div",{staticClass:"text"},[e._v(e._s("确定要删除所选的"+e.selections.length+"条数据吗？"))])]),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"save-btn text",attrs:{type:"primary"},on:{click:e.delMoreData}},[e._v("删除")])],1)])],1)},S=[],k=(a("99af"),a("4160"),a("b0c0"),a("b64b"),a("ac1f"),a("1276"),a("159b"),{data:function(){var e=this,t=function(t,a,s){""==e.passwordForm.password?s(new Error("请再次输入密码")):e.passwordForm.password.length>15||e.passwordForm.password.length<6?s(new Error("长度在 6 到 15 个字符")):s()},a=function(t,a,s){""==e.passwordForm.passwordEqual?s(new Error("请再次输入密码")):e.passwordForm.passwordEqual.length>15||e.passwordForm.passwordEqual.length<6?s(new Error("长度在 6 到 15 个字符")):e.passwordForm.passwordEqual!==e.passwordForm.password?s(new Error("确认密码与新密码不一致!")):s()};return{visibleDetail:!1,detail:"",updateBtndisable:!1,passwordForm:{password:"",passwordEqual:""},rules:{newPassword:[{validator:t,trigger:"blur"}],newPasswordCheck:[{validator:a,trigger:"blur"}]},tableData:[],addTerminalForm:{name:"",password:""},uploadFileVisible:!1,passwordVisible:!1,tipsVisible:!1,delMoreVisible:!1,showFileList:!1,uploadfile:{},fileName:"",fileStatus:"unready",selection:[],selections:[],userName:""}},created:function(){this.userName=window.localStorage.getItem("user"),this.getUpdateList()},filters:{indexMethod:function(e){return e<9?"0"+(e+1):e+1}},methods:{freshData:function(){this.getUpdateList()},getUpdateList:function(){var e,t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.get("package",{params:{device:this.$route.query.id}}));case 2:e=a.sent,t=e.data,200==t.Code&&(null==t.Data?this.tableData=[]:this.tableData=t.Data);case 5:case"end":return a.stop()}}),null,this)},handleCommand:function(e){"a"===e?this.passwordVisible=!0:(this.$router.push({name:"Login"}),window.sessionStorage.removeItem("token"))},changePassword:function(){var e,t,a=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e=this,t="admin"==this.userName?0:1,this.$refs.passwordForm.validate((function(s){if(!s)return!1;var i=window.location.origin+"/upgrade/user/"+t,n=new XMLHttpRequest;n.open("put",i,!0);var r={Password:e.passwordForm.passwordEqual,Username:a.userName},o=JSON.stringify(r);n.send(o),n.onload=function(t){4==n.readyState&200==n.status?(e.$message.success("修改成功"),e.passwordVisible=!1,e.$router.push({name:"Login"}),window.sessionStorage.removeItem("token")):(e.$message.error("修改失败"),e.passwordVisible=!1)}}));case 3:case"end":return s.stop()}}),null,this)},gotOut:function(){this.$router.push({name:"Home"})},uploadFileButton:function(){this.uploadFileVisible=!0},delTipsHandle:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.tipsVisible=!0,this.selection=[e.Id];case 2:case"end":return t.stop()}}),null,this)},delAloneData:function(){var e,t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.post("package/delete",this.selection));case 2:e=a.sent,t=e.data,200==t.Code?(this.$message.success("删除成功"),this.tipsVisible=!1,this.getUpdateList()):this.$message.error("删除失败");case 5:case"end":return a.stop()}}),null,this)},handleSelectionChange:function(e){this.selections=e},delMore:function(){this.selections.length>0?this.delMoreVisible=!0:this.$message.warning("请选择要删除的数据")},delMoreData:function(){var e,t,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e=[],this.selections.forEach((function(t){return e.push(t.Id)})),s.next=4,regeneratorRuntime.awrap(this.$http.post("package/delete",e));case 4:t=s.sent,a=t.data,200==a.Code?(this.$message.success("删除成功"),this.delMoreVisible=!1,this.getUpdateList()):this.$message.error("删除失败");case 7:case"end":return s.stop()}}),null,this)},handleRemove:function(){this.$refs.upload.clearFiles(),this.uploadfile=""},uploadFile:function(e){void 0!==e&&(this.uploadfile=e,this.fileName=e.file.name)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeAvatarUpload:function(e){var t=e.name.split("."),a=t[t.length-1];return"upgrade"==a||"apk"==a||(this.$message({message:"文件上传格式不对，上传文件名以.upgrade或.apk结尾",type:"warning"}),!1)},upload:function(){var e=this;if(Object.keys(this.uploadfile).length>0){var t=window.location.origin+"/upgrade/package?device="+this.$route.query.id+"&detail="+this.detail,a=new XMLHttpRequest;a.upload.onloadstart=function(){e.updateBtndisable=!0},a.onload=function(t){200==JSON.parse(t.currentTarget.response).Code?(e.$message.success("上传成功"),e.$refs.upload.clearFiles(),e.uploadfile="",e.fileName="",e.uploadFileVisible=!1,e.updateBtndisable=!1,e.getUpdateList(),e.detail=""):(e.$message.error("上传失败"),e.$refs.upload.clearFiles(),e.uploadfile="",e.fileName="",e.uploadFileVisible=!1,e.updateBtndisable=!1,e.detail="")};var s=new FormData;s.append("file",this.uploadfile.file),a.open("POST",t,!0),a.send(s)}else this.$message.warning("文件不能为空")}}}),$=k,T=(a("88ab"),a("3c13"),Object(l["a"])($,C,S,!1,null,"4c168287",null)),D=T.exports;s["default"].use(u["a"]);var V=new u["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:w},{path:"/home",name:"Home",component:_},{path:"/model",name:"Model",component:D}]});V.beforeEach((function(e,t,a){if("/login"===e.path)return a();var s=window.sessionStorage.getItem("token");if(!s)return a("/login");a()}));var E=V,q=(a("9e1f"),a("450d"),a("6ed5")),R=a.n(q),I=(a("0fb7"),a("f529")),M=a.n(I),N=(a("f225"),a("89a9")),O=a.n(N),H=(a("e960"),a("b35b")),P=a.n(H),L=(a("d4df"),a("7fc1")),B=a.n(L),j=(a("560b"),a("dcdc")),U=a.n(j),z=(a("a7cc"),a("df33")),A=a.n(z),Z=(a("672e"),a("101e")),J=a.n(Z),X=(a("6611"),a("e772")),Y=a.n(X),G=(a("1f1a"),a("4e4b")),K=a.n(G),Q=(a("5466"),a("ecdf")),W=a.n(Q),ee=(a("38a0"),a("ad41")),te=a.n(ee),ae=(a("b5c2"),a("20cf")),se=a.n(ae),ie=(a("3c52"),a("0d7b")),ne=a.n(ie),re=(a("b5d8"),a("f494")),oe=a.n(re),le=(a("fe07"),a("6ac5")),de=a.n(le),ce=(a("e612"),a("dd87")),ue=a.n(ce),pe=(a("075a"),a("72aa")),me=a.n(pe),fe=(a("8bd8"),a("4cb2")),he=a.n(fe),ge=(a("4ca3"),a("443e")),we=a.n(ge),ve=(a("de31"),a("c69e")),be=a.n(ve),ye=(a("a769"),a("5cc3")),xe=a.n(ye),Fe=(a("adec"),a("3d2d")),_e=a.n(Fe),Ce=(a("10cb"),a("f3ad")),Se=a.n(Ce),ke=(a("eca7"),a("3787")),$e=a.n(ke),Te=(a("425f"),a("4105")),De=a.n(Te),Ve=(a("1951"),a("eedf")),Ee=a.n(Ve),qe=(a("a673"),a("7b31")),Re=a.n(qe),Ie=(a("cb70"),a("b370")),Me=a.n(Ie),Ne=(a("920a"),a("4f0c")),Oe=a.n(Ne),He=(a("960d"),a("defb")),Pe=a.n(He),Le=(a("bd49"),a("18ff")),Be=a.n(Le),je=(a("06f1"),a("6ac9")),Ue=a.n(je);s["default"].use(Ue.a),s["default"].use(Be.a),s["default"].use(Pe.a),s["default"].use(Oe.a),s["default"].use(Me.a),s["default"].use(Re.a),s["default"].use(Ee.a),s["default"].use(De.a),s["default"].use($e.a),s["default"].use(Se.a),s["default"].use(_e.a),s["default"].use(xe.a),s["default"].use(be.a),s["default"].use(we.a),s["default"].use(he.a),s["default"].use(me.a),s["default"].use(ue.a),s["default"].use(de.a),s["default"].use(oe.a),s["default"].use(ne.a),s["default"].use(se.a),s["default"].use(te.a),s["default"].use(W.a),s["default"].use(K.a),s["default"].use(Y.a),s["default"].use(J.a),s["default"].use(A.a),s["default"].use(U.a),s["default"].use(B.a),s["default"].use(P.a),s["default"].use(O.a),s["default"].prototype.$message=M.a,s["default"].prototype.$confirm=R.a.confirm;a("82da"),a("aede");var ze=a("bc3a"),Ae=a.n(ze),Ze=a("4328"),Je=a.n(Ze);Ae.a.defaults.baseURL="/upgrade",s["default"].prototype.$http=Ae.a,s["default"].prototype.$qs=Je.a,s["default"].config.productionTip=!1,new s["default"]({router:E,render:function(e){return e(c)}}).$mount("#app")},"79f3":function(e,t,a){"use strict";var s=a("8641"),i=a.n(s);i.a},"82da":function(e,t,a){},8641:function(e,t,a){},8645:function(e,t,a){},"88ab":function(e,t,a){"use strict";var s=a("8645"),i=a.n(s);i.a},aede:function(e,t,a){},c050:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"static/img/logo.16e6b139.png"},d05d:function(e,t,a){},d3d7:function(e,t,a){}});
//# sourceMappingURL=app.899877ac.js.map